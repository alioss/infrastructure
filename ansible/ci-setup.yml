---
# Set up host as a jenkins worker

- hosts: all
  roles:
    - role: ci-base-setup
    - role: ci-jenkins-user
      when: '"jenkins" in ci_roles'
    - role: ci-jenkins-workspace
      when: '"jenkins" in ci_roles'
    - role: pkg-jdk8
      when: '"jenkins" in ci_roles'
    - role: pkg-jenkins-tools
      when: '"jenkins" in ci_roles'
    - role: ci-data-repo
    - role: ci-jenkins-service
      when: '"jenkins" in ci_roles'
    - role: pkg-git
    - role: pkg-cmake
      when: '"cpp" in ci_roles'
    - role: pkg-ninja
      when: '"cpp" in ci_roles'
    - role: pkg-zip
      when: '"cpp" in ci_roles'
    - role: pkg-doxygen
      # Due to the big dependency collection required for doxygen, we
      # don't want it for minimal systems since the libraries it pulls
      # in may conflict with our builds.
      when: '"cpp-full" in ci_roles'
    - role: pkg-cpp-tools
      when: '"cpp" in ci_roles'
    - role: pkg-cpp-libs
      when: '"cpp-full" in ci_roles'
    - role: pkg-java-tools
      when: '"java" in ci_roles'
    - role: pkg-python27
      when: '"python2" in ci_roles'
    - role: pkg-sphinx
      when: '"docs" in ci_roles or "cpp-full" in ci_roles'
